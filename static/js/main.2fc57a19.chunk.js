(this["webpackJsonpdappnode-explorer"]=this["webpackJsonpdappnode-explorer"]||[]).push([[0],{188:function(e,t,a){e.exports=a(392)},193:function(e,t,a){},194:function(e,t,a){},195:function(e,t,a){},378:function(e,t,a){},379:function(e,t,a){},380:function(e,t,a){},387:function(e,t,a){},388:function(e,t,a){},389:function(e,t,a){},390:function(e,t,a){},391:function(e,t,a){},392:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(56),l=a.n(c),s=a(15),o=(a(193),a(194),a(11)),i=a(19),m=function(e){return r.a.createElement("div",{className:"app-container"},e.children)};a(195);function u(){return r.a.createElement("div",{className:"header_header"},r.a.createElement(m,null,r.a.createElement(s.b,{to:"/"},r.a.createElement("h1",null,r.a.createElement("span",{className:"dappnode"},"DAppNode"),r.a.createElement("span",{className:"explorer"},"EXPLORER")))))}var d=a(22);a(378);function v(e){return r.a.createElement("span",{style:{color:"#767e86",fontSize:12.8}},e)}function E(e){var t=e.active,a=e.payload,n=void 0===a?[]:a,c=e.label;return t?r.a.createElement("div",{className:"custom-recharts-tooltip"},r.a.createElement("div",null,c),r.a.createElement("table",null,r.a.createElement("tbody",null,n.reverse().map((function(e){var t=e.name,a=e.color,n=e.value;return r.a.createElement("tr",{key:t,style:{color:a}},r.a.createElement("td",null,n),r.a.createElement("td",null,t))}))))):null}function p(e){var t=new Date("2020-".concat(e+1,"-1"));return new Intl.DateTimeFormat("en-US",{month:"short"}).format(t)}function f(e){var t=function(e){return e?e.versions.map((function(t,a){return{month:p(t.month),versions:(e.versions[a]||{}).count||0,packages:(e.packages[a]||{}).count||0}})):[]}(e.activity);return r.a.createElement("div",{className:"activity-chart"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"time"},"LAST 12 MONTHS"),r.a.createElement("div",{className:"name"},"ACTIVITY")),r.a.createElement(d.d,{height:200},r.a.createElement(d.b,{data:t},r.a.createElement(d.f,{dataKey:"month",stroke:"#2c3034",tick:{fill:"#767e86",fontSize:12.8}}),r.a.createElement(d.e,{isAnimationActive:!1,cursor:{fill:"transparent"},content:E}),r.a.createElement(d.c,{formatter:v}),r.a.createElement(d.a,{isAnimationActive:!1,maxBarSize:20,dataKey:"packages",name:"new packages",stackId:"a",fill:"#bc7a2f"}),r.a.createElement(d.a,{isAnimationActive:!1,maxBarSize:20,dataKey:"versions",name:"new versions",stackId:"a",fill:"#2fbcb2"}))))}var h=a(155),b=a(59);a(379);function y(e){var t=e.packageCount,a=e.versionCount,n=[{title:"Published packages",stat:t,Icon:h.a},{title:"Published versions",stat:a,Icon:b.b}];return r.a.createElement("div",{className:"summary-stats"},n.map((function(e){var t=e.title,a=e.stat,n=e.Icon;return r.a.createElement("div",{key:t,className:"card"},r.a.createElement("span",{className:"title"},t),r.a.createElement("span",{className:"stat"},a),r.a.createElement("span",{className:"icon"},r.a.createElement(n,null)))})))}function g(e){return e&&"string"===typeof e?e.charAt(0).toUpperCase()+e.slice(1):e}function N(e){return e.replace(/-/g," ").replace(/_/g," ").replace(/\./g," ").split(" ").map(g).join(" ")}var j=a(26),k=a(156),x=a.n(k);function O(e){var t=e.timestamp;if(!t)return r.a.createElement("div",null,"-");var a=x()(1e3*t);return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,a.calendar()),r.a.createElement("div",{className:"light"},a.fromNow()))}a(380);function w(){for(var e=arguments.length,t=new Array(e),a=0;a<e;a++)t[a]=arguments[a];return t.join("/").replace(/([^:]\/)\/+/g,"$1")}function C(e){return e.replace(/\/*ipfs\/*$/,"").replace(/^\/*ipfs[/:]*/,"")}function S(e,t){return w(C(e),"ipfs",C(t))}"".concat("data","/registries.json");var I="".concat("data","/summary.json"),A="".concat("data","/activity.json");function B(e){var t=e.repoSummary,a=Object(i.e)();return r.a.createElement("table",{className:"summary-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",{className:"logo"}),r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Last updated"),r.a.createElement("th",null,"Last version"),r.a.createElement("th",null,"Registry"))),r.a.createElement("tbody",null,Object(j.sortBy)(t,(function(e){return(e.latest||{}).timestamp||0})).reverse().map((function(e){var t=e.name,n=e.registry,c=e.versionCount,l=e.latest;return r.a.createElement("tr",{key:t+n,onClick:function(){return function(e,t){a.push("/".concat(e,"/").concat(t))}(n,t)}},r.a.createElement("td",{className:"logo"},l&&l.logo&&r.a.createElement("img",{src:w("./",l.logo),alt:"logo"})),r.a.createElement("td",null,N(t)),r.a.createElement("td",null,r.a.createElement(O,{timestamp:null===l||void 0===l?void 0:l.timestamp})),r.a.createElement("td",null,r.a.createElement("div",null,null===l||void 0===l?void 0:l.version),r.a.createElement("div",{className:"light"},c)," "),r.a.createElement("td",null,r.a.createElement(L,{registry:n})))}))))}function L(e){var t=e.registry,a="dnp.dappnode.eth"===t?"dnp":"public.dappnode.eth"===t?"public":void 0;return r.a.createElement("div",{className:"registry"},r.a.createElement("span",{className:a},a||t))}var T=a(21),U=a.n(T),H=a(60),F=a(92),V=a(157),z=a(61),P=r.a.createContext({ipfsGateway:"http://ipfs.infura.io",txViewer:"https://etherscan.io/tx"}),D=(P.Provider,P.Consumer,P);function G(e,t){return K.apply(this,arguments)}function K(){return(K=Object(z.a)(U.a.mark((function e(t,a){var n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(S(a,t.contentUri));case 2:return n=e.sent,e.next=5,n.text();case 5:return r=e.sent,e.abrupt("return",Boolean(n.ok&&r));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var R=a(158),$=a.n(R);a(387);function _(e){var t=e.address;return r.a.createElement("div",{className:"address-display"},t&&r.a.createElement("img",{className:"blockie",src:$()(t),alt:""}),r.a.createElement("span",null,t?function(e){return"".concat(e.slice(0,6),"...").concat(e.slice(-4))}(t):""))}a(388);function J(e){var t=e.url;return r.a.createElement("a",{className:"external-link",href:t,rel:"noopener noreferrer",target:"_blank"},r.a.createElement(b.a,null))}var W=a(159);a(389);function Y(e){var t=e.ok,a=!0===t?"ok":!1===t?"nok":"";return r.a.createElement("span",{className:"status-bubble ".concat(a)},r.a.createElement(W.a,null))}a(390),a(391);function M(e){var t=e.version,a=e.isLatest,c=Object(n.useContext)(D).ipfsGateway,l=t.contentUri;return r.a.createElement("div",{className:"version-display"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"title"},t.version," ",a?"(latest)":""),r.a.createElement("div",{className:"contentUri"},l)),r.a.createElement("iframe",{className:"content-preview",name:"version-content",id:"version-content",title:"version-content",src:S(c,l),frameBorder:0}))}var X=function(e){var t=e.match,a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],m=c[1],u=Object(n.useState)({}),d=Object(o.a)(u,2),v=d[0],E=d[1],p=Object(n.useState)(!1),f=Object(o.a)(p,2),h=f[0],b=f[1],y=Object(i.e)(),g=Object(n.useContext)(D),k=g.ipfsGateway,x=g.txViewer,C=t.params,I=C.registry,A=C.repo,B=C.version;if(Object(n.useEffect)((function(){var e=function(e,t){return"".concat("data","/").concat(e,"/").concat(t,".json")}(I,A);fetch(w("./",e)).then((function(e){return e.json()})).then(m)}),[I,A]),Object(n.useEffect)((function(){function e(){return(e=Object(z.a)(U.a.mark((function e(){var t,a,n,r;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!l){e.next=18;break}t=Object(j.sortBy)(l.versions,(function(e){return e.versionId})).reverse(),a=Object(V.a)(t),e.prev=3,r=U.a.mark((function e(){var t,a;return U.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.value,e.next=3,G(t,k);case 3:a=e.sent,E((function(e){return Object(F.a)({},e,Object(H.a)({},t.version,a))}));case 5:case"end":return e.stop()}}),e)})),a.s();case 6:if((n=a.n()).done){e.next=10;break}return e.delegateYield(r(),"t0",8);case 8:e.next=6;break;case 10:e.next=15;break;case 12:e.prev=12,e.t1=e.catch(3),a.e(e.t1);case 15:return e.prev=15,a.f(),e.finish(15);case 18:case"end":return e.stop()}}),e,null,[[3,12,15,18]])})))).apply(this,arguments)}h&&function(){e.apply(this,arguments)}()}),[k,l,h]),!l)return r.a.createElement("p",{className:"soft"},"Loading...");var L=Object(j.sortBy)(l.versions,(function(e){return e.versionId})).reverse(),T=L[L.length-1];T.txHash&&l.creation.txHash!==T.txHash&&L.push(Object(F.a)({version:"Creation",versionId:-1,contentUri:""},l.creation));var P=L[0],K=L.find((function(e){return e.version===B}))||P,R=K.versionId===P.versionId;return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",null,r.a.createElement("div",{className:"repo-name"},N(t.params.repo)),r.a.createElement(s.b,{to:"/".concat(I)},r.a.createElement("div",{className:"registry"},t.params.registry))),r.a.createElement(M,{version:K,isLatest:R}),r.a.createElement("table",{className:"summary-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Version"),r.a.createElement("th",null,"Age"),r.a.createElement("th",{onClick:function(){return b(!0)}},"Content"),r.a.createElement("th",null,"From"),r.a.createElement("th",null,"Txn"))),r.a.createElement("tbody",null,L.map((function(e){var t=e.version,a=e.contentUri,n=e.txHash,c=e.timestamp,l=e.sender;return r.a.createElement("tr",{key:t,onClick:function(){return e=t,void y.push("/".concat(I,"/").concat(A,"/").concat(e));var e}},r.a.createElement("td",null,t),r.a.createElement("td",null,r.a.createElement(O,{timestamp:c})),r.a.createElement("td",{className:"content"},h&&r.a.createElement(Y,{ok:v[t]}),a&&r.a.createElement(J,{url:S(k,a)})),r.a.createElement("td",null,r.a.createElement(_,{address:l})),r.a.createElement("td",{className:"txn"},n&&r.a.createElement(J,{url:w(x,n)})))})))))},q=function(e){var t=e.match,a=Object(n.useState)(),c=Object(o.a)(a,2),l=c[0],s=c[1],m=Object(i.e)(),u=Object(n.useContext)(D).txViewer,d=t.params.registry;return Object(n.useEffect)((function(){var e=function(e){return"".concat("data","/").concat(e,".json")}(d);fetch(w("./",e)).then((function(e){return e.json()})).then(s)}),[d]),l?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"repo-name"},d),r.a.createElement("table",{className:"summary-table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Name"),r.a.createElement("th",null,"Created"),r.a.createElement("th",null,"Owner"),r.a.createElement("th",null,"Txn"))),r.a.createElement("tbody",null,Object(j.sortBy)(l.repos,(function(e){return e.blockNumber||0})).reverse().map((function(e){var t=e.name,a=e.timestamp,n=e.sender,c=e.txHash;return r.a.createElement("tr",{key:t,onClick:function(){return e=t,void m.push("/".concat(d,"/").concat(e));var e}},r.a.createElement("td",null,N(t)),r.a.createElement("td",null,r.a.createElement(O,{timestamp:a})),r.a.createElement("td",null,r.a.createElement(_,{address:n})),r.a.createElement("td",null,r.a.createElement(J,{url:"".concat(u,"/").concat(c)})))}))))):r.a.createElement("p",{className:"soft"},"Loading...")};function Q(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(),s=Object(o.a)(l,2),m=s[0],d=s[1];Object(n.useEffect)((function(){fetch(w("./",I)).then((function(e){return e.json()})).then(c),fetch(w("./",A)).then((function(e){return e.json()})).then(d)}),[]);var v=a.length,E=a.reduce((function(e,t){return e+t.versionCount}),0);return r.a.createElement("div",{className:"App"},r.a.createElement(u,null),r.a.createElement("div",{className:"app-body"},r.a.createElement(i.a,{path:"/",exact:!0},r.a.createElement(f,{activity:m}),r.a.createElement(y,{packageCount:v,versionCount:E}),r.a.createElement(B,{repoSummary:a})),r.a.createElement(i.a,{path:"/:registry",exact:!0,component:q}),r.a.createElement(i.a,{path:"/:registry/:repo/:version?",component:X})))}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(r.a.createElement(s.a,null,r.a.createElement(Q,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[188,1,2]]]);
//# sourceMappingURL=main.2fc57a19.chunk.js.map